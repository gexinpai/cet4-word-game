import{d as W,r as H,w as J,c as g,a as l,b as c,e as r,f as O,F as b,g as k,h as d,o as m,i as h,j as N,t as _,k as B,p as C,l as E,D,_ as U}from"./index-BIAFJ-cp.js";function F(o){for(let e=1;e<o.length;e++)if(o[e]<=o[e-1])return!1;return!0}const y=o=>(C("data-v-e0fd633a"),o=o(),E(),o),K={class:"page"},j={class:"content"},A={class:"search-result"},M={class:"search-history"},T={class:"title-word"},$={class:"title-cn"},q={class:"explain-item"},z=y(()=>l("span",{class:"label"},"英义：",-1)),G={class:"explain-item"},P=y(()=>l("span",{class:"label"},"词根：",-1)),Q={class:"explain-item"},R=y(()=>l("span",{class:"label"},"例句：",-1)),X={class:"explain-item"},Y=y(()=>l("span",{class:"label"},"翻译：",-1)),Z=W({__name:"SearchView",setup(o){const e=H({searchList:[],searchLimit:"0",searchWord:"",activeNames:[],explain:{},searchHistory:JSON.parse(localStorage.getItem("search-history")||"[]")}),V={0:"success",1:"warning",2:"primary",12:"danger"},L=a=>{console.log("newWord",a),e.explain[a]||(e.explain[a]={}),e.explain[a].loadingStatus="loading",D.getWordMean(a).then(({data:s})=>{e.explain[a]=s,localStorage.setItem(a,JSON.stringify(s)),e.explain[a].loadingStatus=""}).catch(()=>{e.explain[a].loadingStatus="error"}).finally(()=>{})},S=a=>{if(!e.explain[a]){const s=localStorage.getItem(a);if(s){e.explain[a]=JSON.parse(s);return}L(a)}};J(()=>e.activeNames,(a,s)=>{if(a.length>s.length){const n=a[a.length-1];S(n)}});const v=a=>{if(console.log("eee=",a),e.searchWord=a.trim(),!e.searchWord)return;const s=e.searchWord.split(" ");e.searchList=B.etc4.reduce((u,p)=>{const f=s.map(i=>p.indexOf(i));if(f.every(i=>i!=-1)&&F(f)){let i=!0,x=!0;return e.searchLimit.includes("1")&&!p.startsWith(s[0])&&(i=!1),e.searchLimit.includes("2")&&!p.endsWith(s[s.length-1])&&(x=!1),i&&x?(S(p),[...u,p]):u}return u},[]);const n={keyWord:e.searchWord,source:"cet4",limit:e.searchLimit};e.searchHistory.unshift(n),localStorage.setItem("search-history",JSON.stringify([n,...e.searchHistory]))};return(a,s)=>{const n=d("el-option"),u=d("el-select"),p=d("el-button"),f=d("el-input"),i=d("el-tag"),x=d("el-collapse-item"),I=d("el-collapse");return m(),g("div",K,[l("div",j,[c(f,{trim:"both",modelValue:e.searchWord,"onUpdate:modelValue":s[2]||(s[2]=t=>e.searchWord=t),class:"search-input",style:{},placeholder:"模糊搜索单词，多字母组合之间用空格隔开；例：m rry",onKeyup:s[3]||(s[3]=O(t=>v(t.target.value),["enter"]))},{prepend:r(()=>[c(u,{modelValue:e.searchLimit,"onUpdate:modelValue":s[0]||(s[0]=t=>e.searchLimit=t),placeholder:"条件搜索",style:{width:"115px"}},{default:r(()=>[c(n,{label:"指定开头",value:"1"}),c(n,{label:"指定结尾",value:"2"}),c(n,{label:"首尾都指定",value:"12"}),c(n,{label:"首尾不限制",value:"0"})]),_:1},8,["modelValue"])]),append:r(()=>[c(p,{type:"primary",onClick:s[1]||(s[1]=t=>v(e.searchWord))},{default:r(()=>[h("搜索")]),_:1})]),_:1},8,["modelValue"]),l("div",A,[l("div",M,[(m(!0),g(b,null,k(e.searchHistory,t=>(m(),N(i,{key:t.keyWord,type:V[t.limit]},{default:r(()=>[h(_(t.keyWord),1)]),_:2},1032,["type"]))),128))]),c(I,{modelValue:e.activeNames,"onUpdate:modelValue":s[4]||(s[4]=t=>e.activeNames=t)},{default:r(()=>[(m(!0),g(b,null,k(e.searchList,t=>(m(),N(x,{key:t,name:t},{title:r(()=>[l("div",null,[l("span",T,_(t),1),l("span",$,_(e.explain[t]&&e.explain[t].mean_cn),1)])]),default:r(()=>[l("p",q,[z,h(_(e.explain[t]&&e.explain[t].mean_en),1)]),l("p",G,[P,h(_(e.explain[t]&&e.explain[t].word_etyma),1)]),l("p",Q,[R,h(_(e.explain[t]&&e.explain[t].sentence),1)]),l("p",X,[Y,h(_(e.explain[t]&&e.explain[t].sentence_trans),1)])]),_:2},1032,["name"]))),128))]),_:1},8,["modelValue"])])])])}}}),ee=U(Z,[["__scopeId","data-v-e0fd633a"]]);export{ee as default};
